<Patch>
    <!-- [Modified for B19] Using a patch fix for water definitions from the Basic Bridges mod (license allows) -->

    <!-- Water Tiles -->

    <Operation Class="PatchOperationSequence">
        <success>Always</success>
        <operations>
            <li Class="PatchOperationRemove">
                <xpath>*/TerrainDef[defName = "WaterDeep"]/changeable</xpath>
            </li>
        </operations>
    </Operation>
    
    <Operation Class="PatchOperationSequence">
        <success>Always</success>
        <operations>
            <li Class="PatchOperationTest">
                <xpath>*/TerrainDef[defName = "WaterDeep"]/affordances</xpath>
                <success>Invert</success>
            </li>
            <li Class="PatchOperationAdd">
                <xpath>*/TerrainDef[defName = "WaterDeep"]</xpath>
                <value>
                    <affordances/>
                </value>
            </li>
        </operations>
    </Operation>

    <Operation Class="PatchOperationAdd">
        <xpath>*/TerrainDef[defName = "WaterDeep"]/affordances</xpath>
        <value>
            <li>Water</li>
        </value>
    </Operation>

    <Operation Class="PatchOperationSequence">
        <success>Always</success>
        <operations>
            <li Class="PatchOperationRemove">
                <xpath>*/TerrainDef[defName = "WaterMovingChestDeep"]/changeable</xpath>
            </li>
        </operations>
    </Operation>

    <Operation Class="PatchOperationSequence">
        <success>Always</success>
        <operations>
            <li Class="PatchOperationTest">
                <xpath>*/TerrainDef[defName = "WaterMovingChestDeep"]/affordances</xpath>
                <success>Invert</success>
            </li>
            <li Class="PatchOperationAdd">
                <xpath>*/TerrainDef[defName = "WaterMovingChestDeep"]</xpath>
                <value>
                    <affordances/>
                </value>
            </li>
        </operations>
    </Operation>

    <Operation Class="PatchOperationAdd">
        <xpath>*/TerrainDef[defName = "WaterMovingChestDeep"]/affordances</xpath>
        <value>
            <li>Water</li>
        </value>
    </Operation>

    <Operation Class="PatchOperationSequence">
        <success>Always</success>
        <operations>
            <li Class="PatchOperationRemove">
                <xpath>*/TerrainDef[defName = "WaterOceanDeep"]/changeable</xpath>
            </li>
        </operations>
    </Operation>

    <Operation Class="PatchOperationSequence">
        <success>Always</success>
        <operations>
            <li Class="PatchOperationTest">
                <xpath>*/TerrainDef[defName = "WaterOceanDeep"]/affordances</xpath>
                <success>Invert</success>
            </li>
            <li Class="PatchOperationAdd">
                <xpath>*/TerrainDef[defName = "WaterOceanDeep"]</xpath>
                <value>
                    <affordances/>
                </value>
            </li>
        </operations>
    </Operation>

    <Operation Class="PatchOperationAdd">
        <xpath>*/TerrainDef[defName = "WaterOceanDeep"]/affordances</xpath>
        <value>
            <li>Water</li>
        </value>
    </Operation>

    <Operation Class="PatchOperationSequence">
        <success>Always</success>
        <operations>
            <li Class="PatchOperationRemove">
                <xpath>*/TerrainDef[defName = "WaterShallow"]/changeable</xpath>
            </li>
        </operations>
    </Operation>

    <Operation Class="PatchOperationSequence">
        <success>Always</success>
        <operations>
            <li Class="PatchOperationTest">
                <xpath>*/TerrainDef[defName = "WaterShallow"]/affordances</xpath>
                <success>Invert</success>
            </li>
            <li Class="PatchOperationAdd">
                <xpath>*/TerrainDef[defName = "WaterShallow"]</xpath>
                <value>
                    <affordances/>
                </value>
            </li>
        </operations>
    </Operation>

    <Operation Class="PatchOperationAdd">
        <xpath>*/TerrainDef[defName = "WaterShallow"]/affordances</xpath>
        <value>
            <li>Water</li>
        </value>
    </Operation>

    <Operation Class="PatchOperationSequence">
        <success>Always</success>
        <operations>
            <li Class="PatchOperationRemove">
                <xpath>*/TerrainDef[defName = "WaterMovingShallow"]/changeable</xpath>
            </li>
        </operations>
    </Operation>

    <Operation Class="PatchOperationSequence">
        <success>Always</success>
        <operations>
            <li Class="PatchOperationTest">
                <xpath>*/TerrainDef[defName = "WaterMovingShallow"]/affordances</xpath>
                <success>Invert</success>
            </li>
            <li Class="PatchOperationAdd">
                <xpath>*/TerrainDef[defName = "WaterMovingShallow"]</xpath>
                <value>
                    <affordances/>
                </value>
            </li>
        </operations>
    </Operation>

    <Operation Class="PatchOperationAdd">
        <xpath>*/TerrainDef[defName = "WaterMovingShallow"]/affordances</xpath>
        <value>
            <li>Water</li>
        </value>
    </Operation>

    <Operation Class="PatchOperationSequence">
        <success>Always</success>
        <operations>
            <li Class="PatchOperationRemove">
                <xpath>*/TerrainDef[defName = "WaterOceanShallow"]/changeable</xpath>
            </li>
        </operations>
    </Operation>

    <Operation Class="PatchOperationSequence">
        <success>Always</success>
        <operations>
            <li Class="PatchOperationTest">
                <xpath>*/TerrainDef[defName = "WaterOceanShallow"]/affordances</xpath>
                <success>Invert</success>
            </li>
            <li Class="PatchOperationAdd">
                <xpath>*/TerrainDef[defName = "WaterOceanShallow"]</xpath>
                <value>
                    <affordances/>
                </value>
            </li>
        </operations>
    </Operation>

    <Operation Class="PatchOperationAdd">
        <xpath>*/TerrainDef[defName = "WaterOceanShallow"]/affordances</xpath>
        <value>
            <li>Water</li>
        </value>
    </Operation>
</Patch>
